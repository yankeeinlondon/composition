# Lint Review - Library Module
**Date:** 2025-12-19
**Module:** lib/
**Linter:** Clippy

## Auto-Fixed Issues

Clippy auto-fix resolved issues in 14 files:

- `src/ai/embedding.rs` (2 fixes)
- `src/render/charts.rs` (1 fix)
- `src/graph/builder.rs` (1 fix)
- `src/graph/workplan.rs` (2 fixes)
- `src/render/html.rs` (1 fix)
- `src/cache/operations.rs` (1 fix)
- `src/image/source.rs` (1 fix)
- `src/graph/cycles.rs` (2 fixes)
- `src/api.rs` (1 fix)
- `src/render/orchestrator.rs` (1 fix)
- `src/image/html.rs` (1 fix)

## Remaining Issues

| File:Line | Rule | Severity | Issue | Fix Strategy |
|-----------|------|----------|-------|--------------|
| `lib/src/render/transclusion.rs:136` | `unused_variables` | Warning | Unused parameter `cache` | Prefix with underscore: `_cache` (parameter is part of trait/API contract) |
| `lib/src/render/transclusion.rs:67` | `unused_variables` | Warning | Unused parameter `frontmatter` | Prefix with underscore: `_frontmatter` (parameter is part of trait/API contract) |
| `lib/src/render/interpolation.rs:35` | `unused_variables` | Warning | Unused error variable `e` | Prefix with underscore: `_e` (error is intentionally ignored) |
| `lib/src/parse/resource.rs:51` | `dead_code` | Warning | Function `parse_resource_with_cache` is never used | Review if function is planned for future use. If yes, add `#[allow(dead_code)]` with TODO comment. If no, remove function. |
| `lib/src/parse/resource.rs:65` | `dead_code` | Warning | Function `parse_duration` is never used | Review if function is planned for future use. If yes, add `#[allow(dead_code)]` with TODO comment. If no, remove function. |
| `lib/src/parse/frontmatter.rs:28` | `clippy::manual_strip` | Warning | Manually stripping prefix instead of using `strip_prefix` | Replace manual slice with idiomatic `strip_prefix` method as suggested by Clippy |
| `lib/src/parse/mod.rs:60` | `clippy::collapsible_match` | Warning | Nested `if let` can be collapsed into outer `match` | Collapse pattern matching to single match arm: `DarkMatterNode::Table { source: crate::types::TableSource::External(resource), .. }` |
| `lib/src/image/source.rs:15` | `clippy::should_implement_trait` | Warning | Method `from_str` should implement `FromStr` trait | Implement `std::str::FromStr` trait instead of custom `from_str` method |

## Summary

- **Auto-Fixed Items:** 14
- **Errors Found:** 0
- **Warnings Found:** 8
- **Warnings marked "do nothing":** 0

### Fix Priority

**High Priority (3):**

1. `parse/frontmatter.rs:28` - Use idiomatic `strip_prefix` method
2. `parse/mod.rs:60` - Collapse nested pattern matching
3. `image/source.rs:15` - Implement `FromStr` trait

**Medium Priority (2):**
4. `parse/resource.rs:51` - Remove or document unused `parse_resource_with_cache`
5. `parse/resource.rs:65` - Remove or document unused `parse_duration`

**Low Priority (3):**
6. `render/transclusion.rs:136` - Prefix unused `cache` parameter
7. `render/transclusion.rs:67` - Prefix unused `frontmatter` parameter
8. `render/interpolation.rs:35` - Prefix unused error variable `e`

## Notes

All warnings are legitimate code quality issues. No warnings were marked "do nothing" as all have straightforward fixes that will improve code quality and maintainability.

The unused functions (`parse_resource_with_cache` and `parse_duration`) should be reviewed to determine if they're:

- Planned for future use (add `#[allow(dead_code)]` with TODO)
- Leftover from refactoring (remove them)
